<head>
  <meta charset="utf-8" />
  <title>{{ title }}</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <h1>Plant moisturizer dashboard</h1>
    <h2>Moisture sensors read-out</h2>
    <div style="height: 300px; width: 500px">
        <canvas id="moistureChart" width="500" height="300"></canvas>
    </div>

    <script>
        const moisture_labels = [
            {% for item in moisture_labels %}
            "{{ item }}",
            {% endfor %}
        ];

        const moisture_data = {
            labels: moisture_labels,
            datasets: [{
                label: 'Sensor 0',
                backgroundColor: 'rgb(255, 99, 132)',
                borderColor: 'rgb(255, 99, 132)',
                data: [{% for item in moisture_values0 %}
                    "{{ item }}",
                    {% endfor %}],
            },{
                label: 'Sensor 1',
                backgroundColor: 'rgb(255, 132, 99)',
                borderColor: 'rgb(255, 132, 99)',
                data: [{% for item in moisture_values1 %}
                    "{{ item }}",
                    {% endfor %}],
            },{
                label: 'Sensor 2',
                backgroundColor: 'rgb(99, 132, 255)',
                borderColor: 'rgb(99, 132, 255)',
                data: [{% for item in moisture_values2 %}
                    "{{ item }}",
                    {% endfor %}],
            }]
        };

        const moisture_config = {
            type: 'line',
            data: moisture_data,
            options: {
                scales: {
                    y: {
                        suggestedMin: 0,
                        suggestedMax: 100
                    }
                }
            }
        };
    </script>

    <script>
        const moistureChart = new Chart(
            document.getElementById('moistureChart'),
            moisture_config
        );
    </script>




    <h2>Temperature read-out</h2>
    <div style="height: 300px; width: 300px">
        <canvas id="temperatureCanvas" width="300" height="300"></canvas>
    </div>

    <script>
        const temperature_data = {
          labels: [
            'Temperature',
            ' '
          ],
          datasets: [{
            label: 'Temperature',
            data: [{% for item in temperature_values %}
                    "{{ item }}",
                    {% endfor %}],
            backgroundColor: [
              'rgb(206, 21, 52)',
              'rgb(214, 208, 214)'
            ],
            hoverOffset: 4
          }]
        };

        const temperature_config = {
            type: 'doughnut',
            data: temperature_data,
            options: {
                rotation: -90,
                circumference: 180,
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        };
    </script>

    <script>
        const temperatureChart = new Chart(
            document.getElementById('temperatureCanvas'),
            temperature_config
        );
    </script>

    <h2>Pump activators</h2>
    <form method="POST" action="/home">
        <input type="submit" value="Activate Pump 1" name="action1"/>
        <input type="submit" value="Activate Pump 2" name="action2" />
        <input type="submit" value="Activate Pump 3" name="action3" />
    </form>
</body>
</html>