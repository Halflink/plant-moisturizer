<head>
  <meta charset="utf-8" />
  <title>{{ title }}</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<style>
    h1 {
        color: #7c7f81;
    }
    h2 {
        color: #7c7f81;
    }

    .container {
        display: grid;
        column-gap: 2px;
        background-color: #101010;
        grid-template-columns: repeat(2, 1fr)
    }

    .kop {
        text-align: center;
        background-color: #282828;
        grid-column: 1 / 3;
    }

    .col-1 {
        position: relative;
        text-align: center;
        float: left;
        background-color: #282828;
    }

    .col-2 {
        position: relative;
        text-align: center;
        float: left;
        background-color: #282828;
    }
</style>
<body>
    <div class="container">
        <div class="kop">
            <h1>Plant moisturizer dashboard</h1>
        </div>
        <div class="col-1">
            <canvas id="moistureChart"></canvas>
        </div>
        <div class="col-2">
            <canvas id="temperatureCanvas"></canvas>
        </div>
    </div>

    <script>
        const moisture_labels = [
            {% for item in moisture_labels %}
            "{{ item }}",
            {% endfor %}
        ];

        const moisture_data = {
            labels: moisture_labels,
            datasets: [{
                label: 'Sensor 0',
                backgroundColor: 'rgb(255, 99, 132)',
                borderColor: 'rgb(255, 99, 132)',
                data: [{% for item in moisture_values0 %}
                    "{{ item }}",
                    {% endfor %}],
            },{
                label: 'Sensor 1',
                backgroundColor: 'rgb(255, 132, 99)',
                borderColor: 'rgb(255, 132, 99)',
                data: [{% for item in moisture_values1 %}
                    "{{ item }}",
                    {% endfor %}],
            },{
                label: 'Sensor 2',
                backgroundColor: 'rgb(99, 132, 255)',
                borderColor: 'rgb(99, 132, 255)',
                data: [{% for item in moisture_values2 %}
                    "{{ item }}",
                    {% endfor %}],
            }]
        };

        const moisture_config = {
            type: 'line',
            data: moisture_data,
            options: {
                scales: {
                    y: {
                        suggestedMin: 0,
                        suggestedMax: 100
                    }
                }
                plugins: {
                    title: {
                        display: true,
                        text: "Moisture sensors read-out"
                    }
                }
            }
        };
    </script>

    <script>
        const moistureChart = new Chart(
            document.getElementById('moistureChart'),
            moisture_config
        );
    </script>

    <script>
        const temperature_data = {
          labels: [
            'Temperature',
            ' '
          ],
          datasets: [{
            label: 'Temperature',
            data: [{% for item in temperature_values %}
                    "{{ item }}",
                    {% endfor %}],
            backgroundColor: [
              'rgb(206, 21, 52)',
              'rgb(214, 208, 214)'
            ],
            hoverOffset: 4
          }]
        };

        const temperature_config = {
            type: 'doughnut',
            data: temperature_data,
            options: {
                rotation: -90,
                circumference: 180,
                plugins: {
                    legend: {
                        display: false
                    },
                    title: {
                        display: true,
                        text: "Temperature read-out"
                    }
                }
            }
        };
    </script>

    <script>
        const temperatureChart = new Chart(
            document.getElementById('temperatureCanvas'),
            temperature_config
        );
    </script>

    <h2>Pump activators</h2>
    <form method="POST" action="/home">
        <input type="submit" value="Activate Pump 1" name="action1"/>
        <input type="submit" value="Activate Pump 2" name="action2" />
        <input type="submit" value="Activate Pump 3" name="action3" />
    </form>
</body>
</html>